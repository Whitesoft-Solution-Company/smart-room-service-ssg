---
import Layout from "../../../layouts/Layout.astro";
import SingleBlogItem from "../../../components/blog/SingleBlogItem.astro";
export const prerender = true;
// Fetch a single blog post based on the slug
export async function getStaticPaths() {

  const API_BASE_URL = import.meta.env.STRAPI_API;
  // Fetch blog post by slug
  const url = `${API_BASE_URL}/api/blogs?populate=*`;
  const response = await fetch(url);
  
  if (!response.ok) {
    console.error(`Error: ${response.status} ${response.statusText}`);
    return [];
  }
  
  try {
    const data = await response.json();
    return data.data.map((blog: any) => ({
      params: { slug: blog.slug },
      props: { blog },
    })) || [];
  } catch (error) {
    console.error("Error parsing JSON:", error);
    return [];
  }

}

const { blog } = Astro.props;
---

<Layout title="Blog">
  <SingleBlogItem blog={blog} />
</Layout>